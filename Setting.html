<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script>
//函数和变量
var test = console.log
function loadjs(link,mode = ''){document.write("<scr"+`ipt src='${link}' ${mode}></scr`+"ipt>")}
function os(u = window.navigator.userAgent)
{
	return {isMobile:!!u.match(/AppleWebKit.*Mobile/i)||!!u.match(/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/),isWechat:!!u.match(/MicroMessenger/i),isQQ:!!u.match(/QQ/i),isIos:!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),isAndroid:!!u.match(/(Android);?[\s/]+([\d.]+)?/),isiPhone:!!u.match(/(iPhone\sOS)\s([\d_]+)/),isSafari:!!u.match(/Safari/),isFirefox:!!u.match(/Firefox/),isOpera:!!u.match(/Opera/),isChrome:u.match(/Chrome/i)!==null&&u.match(/Version\/\d+\.\d+(\.\d+)?\sChrome\//i)===null?true:false,isDeskTop:(()=>{const Agents=['Android','iPhone','SymbianOS','Windows Phone','iPad','iPod','okhttp/3.9.1'];let flag=true;for(let i=0,LEN=Agents.length;i<LEN;i++){if(u.indexOf(Agents[i])!==-1){flag=false;break}}return flag})()};
}
function XHR(url,callback = false)
{
	let xhr = new XMLHttpRequest();
	xhr.open("GET",url+'?'+更新时间);
	xhr.send();
	xhr.onload = function()//xhr.onreadystatechange
	{
		if(this.status === 200 && callback)callback(this.responseText)//&& xhr.readyState === 4
	}
}
var mt_characters,mt_school,mt_club,CFInfo = {}//表情差分信息
var mt_settings = localStorage['设置选项'] ? JSON.parse(localStorage['设置选项']) : {}
var href = window.location.href.split(window.location.host)[1].split('?')[0].replace('index.html','')//文件目录地址
var browser = os();//获取浏览器信息
var date = new Date();
var year = date.getFullYear() % 100; // 年
var month = date.getMonth() + 1; // 月
var day = date.getDate(); // 日
year = year.toString()
month = (month < 10 ? '0'+month : month).toString()
day = (day < 10 ? '0'+day : day).toString()
var MoeTalkURL = "https://moetalk.netlify.app/"//MoeTalk网址
var GitlabURL = 'https://moetalk-ggg555ttt-57a86c1abdf06b5ebe191f38161beddd1d0768c27e1a2.gitlab.io/'
if(window.location.href == GitlabURL)MoeTalkURL = GitlabURL

//设备信息
var cordova = false//cordova客户端
// if(gameid === 'cordova')sessionStorage['cordova'] = 'cordova'
// if(gameid === 'cordova2')sessionStorage['cordova2'] = 'cordova2'
var Html5Plus = window.navigator.userAgent.match('Html5Plus') ? 'mmt.MoeTalkHW.WumberBee' : false//H5网络端
if(window.location.href.indexOf('file:///') === 0)//H5离线端
{
	href = window.location.href.replace('index.html','')
	if(Html5Plus)Html5Plus = 'mmt.MoeTalkH.WumberBee'
}
var fs,nwjs = false;//PC离线端
if(window.location.protocol == 'chrome-extension:')nwjs = true,fs = require('fs');

if(sessionStorage['cordova'] === 'cordova')loadjs('./cordova.js')
if(sessionStorage['cordova2'] === 'cordova2')loadjs('./MoeScript/Cordova/cordova.js')
if(localStorage['调试模式'])loadjs('./MoeScript/Script/vconsole.min.js')
function back()
{
	let link;
	if(Html5Plus || nwjs)link = window.location.href.replace('Setting.html','index.html')
	else link = window.location.href.replace('Setting.html','').replace('setting','')
	window.location.href = link
}
</script>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Expires" content="0">
	<title>设置页面</title>
	<link rel='stylesheet' href="./MoeData/Style.css?md5=b0ae83f3f2b64293e00ebfaa42ce546f" data-n-g=""><!-- @@ -->
	<script src="./MoeScript/Script/jquery.min.js?md5=954f70f07f05742168adceba796dda72"></script><!-- @@ -->
	<script src="./MoeScript/Script/localforage.min.js?md5=3789d1d948e1eb4b5f3122fb339e8f26"></script><!-- @@ -->
	<script src="./MoeScript/INIT.js?md5=c8f88a136119e1a922bf1fcb96727084" defer=""></script><!-- @@ -->
	<script src="./MoeScript/DATA.js?md5=797bc397eada3c146e749ae65c2b96b3" defer=""></script><!-- @@ -->
	<script src="./MoeScript/SETTING.js?md5=a11219d55f9629aa96705b469b5947ac" defer=""></script><!-- @@ -->
</head>
<body style="height:100%;overflow:auto;background-image:linear-gradient( rgba(255,255,255,0.5),rgba(255,255,255,0.5) ),url(MoeData/Ui/hexa_back_01.webp);background-repeat :no-repeat;background-size :cover;user-select:none;">
	
	<h1><a href='#' onclick="back()"><i style='color: red; font-weight: bold;'>返回MoeTalk</i></a></h1>
	<button class="button-container" style='background-color: red;'><a href='https://wj.qq.com/s2/14292312/3ade/' target='_blank' onclick="alert('※提交存档和图片可以帮助开发者更顺利的排查错误')"><b style='color:white;'>反馈页面</a></b></button>
	<button class="button-container" ><a href='https://tieba.baidu.com/p/8551808608'><b style='color:black;'>使用教程</a></b></button>
	<button class="button-container" ><a href='https://pan.baidu.com/s/1Cc-Us0FM_ehP9h5SDWhrVg?pwd=blda'><b style='color:black;'>客户端下载地址，提取码:blda</a></b></button>
	<h2><a>数据相关：</a></h2>
	<button class="button-container" id='savedata'><b style='color:white'>下载MoeTalk本地数据存档</b></button>
	<button class="button-container" id='loaddata'><b style='color:white;'>上传MoeTalk本地数据存档</b></button>
	<button class="button-container" id='cleancache'><b style='color:green;'>清除ServiceWorker缓存</b></button>
	
	<h2><a>截图相关：</a></h2>
	<button class="button-container" id='mt-image'><b style='color:blue;'>更改截图格式</b></button>
	<button class="button-container" id='mt-maxheight'><b style='color:blue;'>限制截图长度</b></button>
	<button class="button-container" id='mt-maxwidth'><b style='color:blue;'>限制截图宽度</b></button>
	<button class="button-container" id='mt-zipdownimg'><b style='color:blue;'>打包下载图片</b></button>
	<h2><a>图片相关：</a></h2>
	<button class="button-container" id='hnum'><b style='color:blue;'>设置自定义头像质量</b></button>
	<button class="button-container" id='mt-size'><b style='color:blue;'>设置整体图片宽高百分比</b></button>
	<button class="button-container" id='mt-cfsize'><b style='color:blue;'>设置差分表情宽高百分比</b></button>
	<h2><a>编辑界面相关：</a></h2>
	<button class="button-container" id='mt-fontSize'><b style='color:green;'>设置移动端元素尺寸</b></button>
	<button class="button-container" id='language'><b style='color:green;'>更改语言</b></button>
	<button class="button-container" id='send'><b style='color:green;'>文字发送方式</b></button>
	<button class="button-container" id='font'><b style='color:green;'>字体加载选项</b></button>
	<button class="button-container" id='mt-title'><b style='color:green;'>设置标题文字</b></button>
	<button class="button-container" id='SETTING_隐藏差分'><b style='color:green;'>隐藏表情差分按钮</b></button>
	<div style="border:1px solid var(--m-3-sys-light-outline, #79747E)">
		<h3 style='color:green;'>标题颜色选择</h3>
		<br><b style='color:green;'>推荐颜色：</b>
		<button class="button-container selectColor" style="background-color: #8BBBE9;"></button>
		<button class="button-container selectColor" style="background-color: #FFDC42;"></button>
		<button class="button-container selectColor" style="background-color: #E599FF;"></button>
		<button class="button-container selectColor" style="background-color: #8FFFCD;"></button>
		<button class="button-container selectColor" style="background-color: #FF8FBF;"></button>
		<b style='color:green;'>自定义颜色：</b>
		<input type="color" id="titleColor"  value="{{i.4|date:'c'}}">
		<br><button class="button-container" id='mt-titleColor'><b style='color:green;'>提交颜色</b></button>
	</div>
	<div style="border:1px solid var(--m-3-sys-light-outline, #79747E)">
		<h3 style='color:green;'>聊天字体大小</h3>
		<br><b style='color:green;'>文字：</b><input type="text" title='chat' placeholder="1.2rem">
		<b style='color:green;'>回复：</b><input type="text" title='reply' placeholder="1.1rem">
		<b style='color:green;'>羁绊：</b><input type="text" title='heart' placeholder="1.1rem">
		<b style='color:green;'>旁白：</b><input type="text" title='info' placeholder="1.1rem">
		<br><button class="button-container" id='mt-fontszie'><b style='color:green;'>提交参数</b></button>
	</div>
	<h1>存档恢复:</h1>请上传由MoeTalk生成的png图片：<input type="file" id="file1">
	<p><a href="https://space.bilibili.com/13973390">B站主页</a></p>
	<p><a href="https://gitlab.com/ggg555ttt/MoeTalk">项目地址（gitlab）</a></p>
	<p><a href="https://github.com/ggg555ttt/MoeTalk">项目地址（github）</a></p>
	<h1 class="bold">设置信息：</h1>
	<p class="mt_settings bold" style="white-space: pre-wrap;"></p>
	<h2><a>存档相关</a></h2>
	<button class="button-container" id='SETTING_图片存档'><b style='color:white;'>旧版图片存档</b></button>
	<button class="button-container" id='clean'><b style='color:red;'>彻底清除本地数据（别碰！）</b></button>
	<button class="button-container" id='savemode'><b style='color:white;'>存储模式（别碰！）</b></button>
	<button class="button-container" id='backsave'><b style='color:white;'>后台保存模式（别碰！）</b></button>
	<button class="button-container" id='loadcus'><b style='color:white;'>上传自定角色存档（别碰！）</b></button>
</body>
</html>